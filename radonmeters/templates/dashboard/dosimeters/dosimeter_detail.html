{% extends 'dashboard/layout.html' %}
{% load i18n %}

{% block body_class %}{{ block.super }} create-page{% endblock %}

{% block title %}
    {{ title }} | {% trans "Dosimeters" %} | {{ block.super }}
{% endblock %}

{% block breadcrumbs %}
    <ul class="breadcrumb">
        <li>
            <a href="{% url 'dashboard:index' %}">{% trans "Dashboard" %}</a>
        </li>
        <li>
            <a href="{% url 'dashboard:dosimeter-list' %}">{% trans "Dosimeters" %}</a>
        </li>
        {% if dosimeter %}
            <li class="active">{% trans 'Edit dosimeter' %}</li>
        {% else %}
            <li class="active">{% trans 'Create dosimeter' %}</li>
        {% endif %}
    </ul>
{% endblock %}

{% block headertext %}
    {% if dosimeter %}
        ID: {{ dosimeter.id }}
    {% else %}
        {% trans "Create new dosimeter" %}
    {% endif %}
{% endblock %}

{% block dashboard_content %}
    <form action="." method="post" class="form-stacked well wysiwyg">
        {% csrf_token %}
        <input type="hidden" name="next_url" value="{{ request.GET.next_url }}">
        {% include "dashboard/partials/form_fields.html" with form=form %}
        {% block form_actions %}
            <div class="form-actions">
                <button class="btn btn-primary btn-lg" type="submit" data-loading-text="{% trans 'Saving...' %}">{% trans "Save" %}</button>
                <a class="btn btn-default btn-lg" href="{% if request.GET.next_url %}{{ request.GET.next_url }}{% else %}{% url 'dashboard:dosimeter-list' %}{% endif %}">{% trans "cancel" %}</a>
            </div>
        {% endblock form_actions %}
    </form>
{% endblock dashboard_content %}


{% block onbodyload %}
    {{ block.super }}
    $(['#id_measurement_start_date', '#id_measurement_end_date'])
        .each(function(i, e) {
            $(e).attr('placeholder', 'DD-MM-YYYY').inputmask('d-m-y');
        });
{% endblock onbodyload %}
