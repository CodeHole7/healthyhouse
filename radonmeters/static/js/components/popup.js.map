{"version":3,"sources":["components/popup.js"],"names":["$","g","fn","_wait","time","timout","that","this","Promise","resolve","reject","setTimeout","clearTimeout","_measureScrollBarWidth","$body","scrollDiv","document","createElement","className","append","scrollbarWidth","offsetWidth","clientWidth","removeChild","Rm_popup","mainElement","options","o","popup","close_btn","afterClose","beforeOpen","beforeClose","afterOpen","plugin","settings","elem","setPaddingToBody","paddingRight","$holder","clear","addClass","css","close_popup","trigger","find","then","$elem","parents","removeClass","apply","init","close","popup_holder","is","e","stopPropagation","preventDefault","keyCode","hide","show","open_popup","rm_popup","each","undefined","data","jQuery","window"],"mappings":"cAAC,SAAEA,EAAGC,GAKFD,EAAEE,GAAGC,MAAQ,SAAUC,GACnB,IAAIC,OAAAA,EACAC,EAAON,EAAEO,MACb,OAAO,IAAIC,QAAQ,SAAAC,EAAAC,GACfL,EAASM,WAAW,WAChBF,EAAQH,GACRM,aAAaP,GACbA,EAAS,MACVD,MAIXJ,EAAEE,GAAGW,uBAA0B,WAC3B,IAAMC,EAAUd,EAAA,QAEhB,OAAO,WACH,IAAIe,EAAYC,SAASC,cAAc,OACvCF,EAAUG,UAAY,0BACtBJ,EAAM,GAAGK,OAAOJ,GAChB,IAAIK,EAAiBL,EAAUM,YAAcN,EAAUO,YAEvD,OADAR,EAAM,GAAGS,YAAYR,GACdK,GATgB,GAa/BpB,EAAEwB,SAAW,SAAkBC,EAAaC,GACxC,IAAIC,GACAC,MAAA,gBACAC,UAAA,eACAC,WAAA,aACAC,WAAc,aACdC,YAAe,aACfC,UAAa,cAGbC,EAAS3B,KAEb2B,EAAOC,YAEP,IAAIC,EAAOpC,EAAEyB,GAKPY,EAAoB,WACtB,IAAIC,EAAe,EACnB,OAAO,SAAAC,EAACA,GACJD,EAAiBE,EAAjB,EAA0BD,EAAQ1B,yBAA2B,KAC7Db,EAAE,QAAQyC,SAAS,cAAcC,IAAI,eAAgBJ,IAJnC,GAQpBK,EAAc,WAChB,IAAIJ,EAAUH,EAEdG,EAAQK,QAAS,kBACjBL,EAAQG,IAAI,YAAa,UACzBH,EAIUM,KAAA,iBACLC,YAAK,eAAA3C,MAAS4C,KACdD,KAAK,SAAAC,GAAA,OAAAA,EAAMC,QAAAT,GAAAU,YAAA,eAAA9C,MAAA,OACRoC,KAAAA,SAAAA,GAAAA,OAAAQ,EAAgBE,YAAhB,uBACAV,KAAAA,WAbZ,OAcYA,EAAAK,QAAa,mBACbV,EAAOC,KAASL,cAAhB,QACAO,EAAAA,KAAiBE,cAAjB,SACEL,EAAQe,SAAAA,WAAYC,MAAtBX,GAAAA,IADAF,EAAiBE,GAAS,GAG1BvC,EAAA,QAAAiD,YAAA,cAnBZV,KAyBIA,EAAA,WACAL,IAAAA,EAAOC,EACPE,EAAAA,QAAiBE,iBACjBA,EAAAA,SAAYR,WAAamB,MAAzBX,GAAAA,IACAA,EACcA,GAEJA,EAAAG,IAASK,YAAA,UAATR,EACAE,SAASM,qBACdD,MAAK,IACFP,KAAAA,SAAAA,GAAAA,OAAAQ,EAAiBN,SAAA,eAAjBtC,MAAA,OACAoC,KAAAA,SAAAA,GAAAA,OAAaQ,EAAAF,KAAb,iBAAAJ,SAAA,eAAAtC,MAAA,OACAoC,KAAAA,WAEA,OADAL,EAAOC,QAASF,mBAChBM,EAAOA,KAAP,cAAA,SAVRA,EAAAG,IAAA,YAAA,QANJR,EAAAC,SAAAF,UAAAiB,MAAAX,GAAAA,IAgBmBA,KAQfL,EAAAiB,KACAvB,WADAM,EAEAkB,SAAcP,EAAAA,UAAOhB,EAAbH,GAER2B,IAAAA,EAAmBjB,EACqBgB,EAAjCC,EAAaC,KAAGD,EAAAA,OAAiBR,KAAAlB,EAAAE,WACpC0B,EAAEC,MAAAA,SAAFD,GACAZ,EAAAA,EAAAA,QAAAA,GAAAA,KAHJY,EAAAC,kBAGIb,OAKAY,EAAEE,MAAAA,SAAFF,GAFJZ,IAEIY,EAAEE,mBAKEd,EAAAA,QAAAA,QAAAA,SAAAA,GACH,MAAAY,EAAAG,SAHLf,OAUUT,EAAdyB,KAAA,WAAA,OAAAhB,KAEAT,EAAO0B,KAAO,WAAA,OAAAC,KAAA3B,EAAdiB,QAGHnD,EAxGDE,GAAA4D,SAAA,SAAApC,GA2GI,OAAOnB,KAAKwD,KAAK,WADhBD,QAAAA,IAAoBA,EAAAA,MAASpC,KAAAA,YAAS,CAChC,IAAKqC,EAAK,IAAA/D,EAAAwB,SAAWjB,KAAAmB,GACpBsC,EAAAA,MAAAA,KAAAA,WAAsBC,OA1IrC,CA+IIC,OAPDC","file":"popup.js","sourcesContent":[";(($, g) => {\n    'use strict';\n\n\n\n    $.fn._wait = function (time) {\n        let timout;\n        let that = $(this);\n        return new Promise(function(resolve, reject) {\n            timout = setTimeout(function() {\n                resolve(that);\n                clearTimeout(timout);\n                timout = null;\n            }, time);\n        });\n    };\n\n    $.fn._measureScrollBarWidth = (function () {\n        const $body = $('body');\n\n        return function () {\n            let scrollDiv = document.createElement('div');\n            scrollDiv.className = 'modal-scrollbar-measure';\n            $body[0].append(scrollDiv);\n            let scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n            $body[0].removeChild(scrollDiv);\n            return scrollbarWidth;\n        }\n    })();\n\n    $.Rm_popup = function Rm_popup(mainElement, options) {\n        var o = {\n            \"popup\":\".popup-dialog\",\n            \"close_btn\":\".close-popup\",\n            \"afterClose\":function(){},\n            \"beforeOpen\": function() {},\n            \"beforeClose\": function () {},\n            \"afterOpen\": function () {}\n        };\n\n        var plugin = this;\n\n        plugin.settings = {};\n\n        var elem = $(mainElement);\n\n        //\n        // private methods\n        //\n        const setPaddingToBody = (() => {\n            let paddingRight = 0;\n            return ($holder, clear) => {\n                paddingRight = (!clear) ? $holder._measureScrollBarWidth() + 'px' : 0;\n                $('body').addClass('modal-open').css('paddingRight', paddingRight);\n            }\n        })();\n\n        const close_popup = () => {\n            let $holder = elem;\n\n            $holder.trigger( 'close:rm_modal' );\n            $holder.css('overflowY', 'hidden');\n            $holder\n                .find('.popup-dialog')\n                .removeClass('show-dialog')\n                ._wait(500)\n                .then($elem => $elem.parents($holder).removeClass('animated_in')._wait(305))\n                .then($elem => $elem.removeClass('show_popup_holder'))\n                .then(() => {\n                    $holder.trigger('closed:rm_modal');\n                    $holder.attr('aria-hidden', 'true');\n                    $holder.attr('aria-hidden', 'false');\n                    plugin.settings.afterClose.apply($holder,[$holder]);\n                    setPaddingToBody($holder, true);\n                    $('body').removeClass('modal-open');\n\n                    return $holder;\n                });\n        };\n\n        const open_popup = () => {\n            let $holder = elem;\n            $holder.trigger( 'open:rm_modal' );\n            plugin.settings.beforeOpen.apply($holder, [$holder]);\n            setPaddingToBody($holder);\n            $holder.css('overflowY', 'hidden');\n            $holder\n                .addClass('show_popup_holder')\n                ._wait(50)\n                .then($elem => $elem.addClass('animated_in')._wait(305))\n                .then($elem => $elem.find('.popup-dialog').addClass('show-dialog')._wait(500))\n                .then(() => {\n                    $holder.trigger( 'opened:rm_modal' );\n                    $holder.attr('aria-hidden', 'false');\n                    $holder.css('overflowY', 'auto');\n                    plugin.settings.afterOpen.apply($holder, [$holder]);\n                    return $holder;\n                });\n        };\n\n\n        plugin.init = function init() {\n            plugin.settings = $.extend({}, o, options);\n\n            var popup_holder = elem,\n            popup = popup_holder.find(o.popup),\n            close = popup.find(o.close_btn);\n\n            popup_holder.click(function(e){\n                if(!$(e.target).is(popup_holder)) { return; }\n                e.stopPropagation();\n                close_popup();\n            });\n\n            close.click(function(e){\n                close_popup();\n                e.preventDefault();\n            });\n\n            $('body').keydown(function(e){\n                if(e.keyCode=='27'){\n                    close_popup();\n                }\n            });\n        };\n\n        //\n        // public methods\n        //\n        plugin.hide = () => close_popup();\n\n        plugin.show = () => open_popup();\n\n        plugin.init();\n    };\n\n    $.fn.rm_popup = function rm_popup(options) {\n        return this.each(function() {\n            if (undefined === $(this).data('rm_popup')) {\n                var plugin = new $.Rm_popup(this, options);\n                $(this).data('rm_popup', plugin);\n            }\n        });\n    };\n\n})(jQuery, window);\n\n\n"]}