{"version":3,"sources":["pages/shipping_form.js"],"names":["$","$form","$confirmBtn","find","formValid","window","_radonOptions","requiredError","invalidEmailError","invalidPhoneError","valid","validateForm","remove","field","not","value","this","val","attr","is","intlTelInput","addClass","parents","_utils","validateEmail","append","onsubmit","preventDefault","disabled","e","autosize","prop","blur","submit","jQuery"],"mappings":"cAAA,SAACA,GACC,IAAAC,EAAAD,EAAA,yBAGIE,EAAcD,EAAME,KAAK,yBADzBF,GAAU,EAEVG,EAAYC,OAAhBC,cAAAC,cAGIC,EAAoBH,OAAOC,cAAcE,kBADzCD,EAAgBF,OAAOC,cAAcC,kBAErCE,EAAAA,WAGF,IAAIC,GAAQ,EADRC,OAAAA,EACAD,OAAAA,EA6DER,OA3DND,EAGGE,KAAK,cADRF,YACQ,aAELE,KAAK,cAGRF,SAEAA,EACGE,KAAK,aACDS,SAGHX,EACEY,KAAAA,SAJHC,IAAI,mBASDJ,KAAAA,aACDK,EAAAf,EAAAgB,MAAAC,QAPajB,EAAEgB,MAAME,KAAK,cASvBlB,EAAQmB,EAARH,MACGhB,QAAQoB,eACTC,SACCC,aAGHZ,OAAQV,EAAAO,IAEXG,GAAA,GAGKV,EAACuB,MAAOC,GAAR,mCAA8BT,IAC9Bf,EAAFgB,MACGM,aAAQ,mBAGXZ,EAAAA,MACDY,QAAA,eACFD,SAAA,aAhCLI,OAAAzB,EAAAS,IAoBQC,GAAQ,IAkBTgB,EAAAA,MAATP,GAASO,mBAAuBX,IAC1BX,OAAWoB,cAAAT,KACbf,EAAOgB,MACFM,QAAA,eACHK,SAAF,aACIC,OAAW1B,EAAAA,IACV0B,GAAL,MAKI1B,GAGJD,EAAA,GAAAyB,SAAA,SAAAG,GACD,QAAAzB,IAGH0B,EAAAA,iBAhFF5B,EAAA6B,KAAA,cAqEQ7B,EAAY8B,OACRrB,MACFP,GAAY,EACZH,EAAMgC,SACN/B,EAAY6B,KAAK,YAAY,MAG1B,IAIXD,SAAS7B,EAAME,KAAK,aAhFtB,CAiFG+B","file":"shipping_form.js","sourcesContent":["($ => {\n  \"use strict\";\n\n  let $form = $(\"#new_shipping_address\");\n  let $confirmBtn = $form.find('button[type=\"submit\"]');\n  let formValid = false;\n\n  let requiredError = window._radonOptions.requiredError;\n  let invalidEmailError = window._radonOptions.invalidEmailError;\n  let invalidPhoneError = window._radonOptions.invalidPhoneError;\n\n  const validateForm = () => {\n    let valid = true;\n    let value;\n    let field;\n\n    $form\n      .find(\".has-error\")\n      .removeClass(\"has-error\")\n      .find(\".errorlist\")\n      .remove();\n\n    $form.find(\".nonfield\").remove();\n\n    $form\n      .find(\"input\")\n      .not('[type=\"hidden\"]')\n      .each(function() {\n        value = $(this).val();\n        if (!value && $(this).attr(\"required\")) {\n          field = $(this)\n            .parents(\".form-group\")\n            .addClass(\"has-error\")\n            .append($(requiredError));\n\n          valid = false;\n        }\n\n        if ($(this).is(`[name=\"phone_number_modified\"]`) && value) {\n          if (!$(this).intlTelInput(\"isValidNumber\")) {\n            $(this)\n              .parents(\".form-group\")\n              .addClass(\"has-error\")\n              .append($(invalidPhoneError));\n            valid = false;\n          }\n        }\n\n        if ($(this).is(`[type=\"email\"]`) && value) {\n          if (!_utils.validateEmail(value)) {\n            $(this)\n              .parents(\".form-group\")\n              .addClass(\"has-error\")\n              .append($(invalidEmailError));\n            valid = false;\n          }\n        }\n      });\n\n    return valid;\n  };\n\n  $form[0].onsubmit = function(e) {\n    if (formValid) {\n      return true;\n    } else {\n      e.preventDefault();\n      var disabled = $confirmBtn.prop(\"disabled\");\n      if (!disabled) {\n        $confirmBtn.blur();\n        if (validateForm()) {\n          formValid = true;\n          $form.submit();\n          $confirmBtn.prop(\"disabled\", true);\n        }\n      }\n      return false;\n    }\n  };\n\n  autosize($form.find(\"textarea\"));\n})(jQuery);\n"]}