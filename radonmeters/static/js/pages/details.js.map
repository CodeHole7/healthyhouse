{"version":3,"sources":["pages/details.js"],"names":["$","global","videoType","onYouTubeIframeAPIReady","framePlayer","type","pause","catch","error","$slider","$preview","zoomPosition","options","autoInside","zoomSizeMode","zoomMatchSize","CloudZoom","find","removeClass","data","destroy","this","addClass","src","original","attr","length","slick","infinite","slidesToShow","slidesToScroll","arrows","autoplay","focusOnSelect","vertical","verticalSwiping","$quantityWrapper","$quantityfield","$incr","$decr","max","val","on","number","min","value","toFixed","parseFloat","e","preventDefault","currentVal","$contentWrapper","DELAY","indexOf","setHeight","event","$elem","contentBlock","css","outerHeight","window","hasClass","resize","$tabs","stopPlayer","delay","animate","offset","top","scrollTop","tag","document","createElement","apiUrls","firstScriptTag","getElementById","parentNode","insertBefore","onload","Vimeo","Player","onloadFrameScript","YT","bind","undefined","jQuery"],"mappings":"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","file":"details.js","sourcesContent":["(($, global) => {\n    'use strict';\n\n    let $slider = $('.thumbnails-slider');\n    let $preview = $('.image-view');\n\n    const options = {\n        zoomPosition: 'inside',\n        autoInside: true,\n        zoomSizeMode: 'zoom',\n        zoomOffsetX: 0,\n        zoomMatchSize: true\n    };\n    $preview.CloudZoom(options);\n\n    $slider.on('click', '.thumbnail', function () {\n        $slider.find('.thumbnail').removeClass('selected');\n        $preview.data('CloudZoom').destroy();\n        let src = $(this).addClass('selected').data('original');\n        let original = $(this).data('cloudzoom');\n        $preview.attr('src', src);\n        $preview.attr('data-cloudzoom', original);\n        $preview.CloudZoom(options);\n    });\n    let length = $slider.find('.thumbnail').length;\n    $slider.slick({\n        infinite: false,\n        slidesToShow: length > 4 ? 4 : length,\n        slidesToScroll: 1,\n        arrows: length > 4 ? true : false,\n        autoplay: false,\n        focusOnSelect: true,\n        vertical: true,\n        verticalSwiping: true,\n        prevArrow: $('.slick-prev'),\n        nextArrow: $('.slick-next')\n    });\n\n    ////////////////////////////////////////////////\n    /// quantity input\n    ////////////////////////////////////////////////\n    let $quantityWrapper = $('.quantity');\n    let $quantityfield = $quantityWrapper.find('input');\n    let $incr = $quantityWrapper.find('.quantity-incr');\n    let $decr = $quantityWrapper.find('.quantity-decr');\n    let max = +$quantityfield.attr('max') ? +$quantityfield.attr('max') : 10000;\n    let min = +$quantityfield.attr('min');\n    let currentVal = +$quantityfield.val();\n    let getValueInRange = (val) => {\n        if(val > max) {\n            return parseFloat(max);\n        } else if(val < min) {\n            return parseFloat(min);\n        } else {\n            return val\n        }\n    };\n    $quantityfield.on('keypress input cut paste', function () {\n        let number = $(this).val();\n\n        if(number > max) {\n            number = `${max}`;\n        }\n        if(number < min) {\n            number = `${min}`;\n        }\n        let value = (number.split('.'));\n        if (value[1]){\n            number = parseFloat(number[0]).toFixed(0);\n        }\n        currentVal = +number;\n        $(this).val( number );\n    });\n\n    $incr.on('click', function (e) {\n        e.preventDefault();\n        if(currentVal >= max) { return; }\n        $quantityfield.val(currentVal + 1);\n        currentVal = currentVal + 1;\n    });\n    $decr.on('click', function (e) {\n        e.preventDefault();\n        if(currentVal == min) { return; }\n        $quantityfield.val(currentVal - 1);\n        currentVal = currentVal - 1;\n    });\n\n    ////////////////////////////////////////////////\n    /// product details tab\n    ////////////////////////////////////////////////\n    const $tabs = $('.sub-section-tab');\n    const DELAY = 0,\n          DURATION = 300;\n    const $contentWrapper = $('.additional-info-wrapper');\n    let videoType;\n\n    (() => {\n        let src = $('#featured-video-frame').attr('src');\n\n        if(!src) { return; }\n        if(src.indexOf('vimeo') > -1) {\n            videoType = 'vimeo';\n        }\n\n        if(src.indexOf('youtube') > -1) {\n            videoType = 'youtube';\n        }\n    })();\n\n\n    const setHeight = (event, $elem) => {\n        let contentBlock = $elem || $('.content-block.active');\n        $contentWrapper.css(\"minHeight\", contentBlock.outerHeight(true));\n    };\n\n    setHeight(null);\n\n    $(window).resize(setHeight);\n\n    $tabs.on('click', function (e) {\n        e.preventDefault();\n\n        if($(this).hasClass('active')) { return; }\n\n        $tabs.removeClass('active');\n        $(this).addClass('active');\n        $('.content-block.active').removeClass('active');\n        let contentBlock = $($(this).data('content'));\n        contentBlock.addClass('active');\n        setHeight(null, contentBlock);\n        stopPlayer(videoType);\n    });\n\n    $('.important-info').on('click', function (e) {\n        e.preventDefault();\n        $('.content-block.active').removeClass('active');\n        let contentBlock = $($(this).data('content')).addClass('active');\n        $tabs.removeClass('active');\n        $tabs.filter(`[data-content=\"${$(this).data('content')}\"]`).addClass('active');\n        setHeight(null,contentBlock);\n\n        stopPlayer(videoType);\n        $('html, body').delay( DELAY ).animate({\n            scrollTop: contentBlock.offset().top\n        }, DURATION);\n    });\n\n\n\n    global.framePlayer = null;\n    const apiUrls = {\n        'youtube': \"https://www.youtube.com/iframe_api\",\n        'vimeo': \"https://player.vimeo.com/api/player.js\"\n    };\n\n    function onloadFrameScript(videoType) {\n        if(videoType === 'vimeo') {\n            global.framePlayer = new global.Vimeo.Player($('#featured-video-frame')[0]);\n        }\n\n        if(videoType === 'youtube') {\n            global.onYouTubeIframeAPIReady = function() {\n                global.framePlayer = new global.YT.Player('featured-video-frame');\n            };\n        }\n    }\n\n    function stopPlayer(type) {\n        if (global.framePlayer && type === 'youtube') {\n            global.framePlayer.pauseVideo();\n        } else if(global.framePlayer && type === 'vimeo') {\n            global.framePlayer.pause().catch(function(error) {\n                void 0;\n            });\n        }\n    }\n\n    if(videoType) {\n        // 2. This code loads the IFrame Player API code asynchronously.\n        let tag = document.createElement('script');\n\n        tag.src = apiUrls[videoType];\n        let firstScriptTag = document.getElementById('forVideoApi');\n        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n\n        tag.onload = onloadFrameScript.bind(this, videoType);\n    }\n})(jQuery, window);\n"]}