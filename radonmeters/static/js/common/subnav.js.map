{"version":3,"sources":["common/subnav.js"],"names":["$","$leftPaddle","scrollDuration","length","$rightPaddle","outerWidth","offset","menuWrapperSize","getMenuWrapperSize","window","on","menuVisibleSize","itemsLength","itemSize","menuInvisibleSize","menuSize","getMenuPosition","scrollLeft","each","inx","item","css","addClass","maxAnimationTime","TO","clearTimeout","menuPosition","menuEndOffset","removeClass","resize","shift","animate","menuPos","section","scrollTop","top","e","POSTFIX","location","hash","this","attr","substr","delay","jQuery"],"mappings":"cAAA,SAAEA,GACE,IAIIC,EAAcD,EAAE,gBAFdE,EAAAA,EAAiB,iBAEnBD,EAAcD,EAAE,iBAApBG,OACIC,EAAAA,EAAAA,iBAAiBC,YAArB,GAOMC,EAAN,WAAA,OAAAN,EAAA,0BAAAK,cAEAE,EAAAC,IACyBR,EAAAS,QAAAC,GAAQ,SAAA,WAAjCH,EAAAC,MAGA,IAKIG,EAJJC,EAAAC,EAMAC,EAAAC,EAAAR,EACAS,EAAA,WAAA,OAAAhB,EAAA,iBAAAiB,cAEA,GAAIF,EAAJ,CAUAf,EAAE,mBAAmBkB,KAAK,SAAWC,EAAKC,GAN1CpB,EAAAoB,GAAAC,IAAA,kBAFIP,KAEJK,EAAA,IAAA,IAAA,KAAAG,SAAA,eAWA,IAAIC,EAbAT,KAa6Bd,EAAE,mBAAmBG,OAAS,EAAK,IAAO,IARxEqB,EAACZ,WAAa,WAAEZ,EAAA,mBAAAqB,IAAA,kBAAA,MAASI,aAAAD,GAYxBA,EAAK,MAVTD,GAICvB,EAHD,iBAAAU,GAAA,SAAA,WAMIc,EAAgBT,EAAWR,EAE3BkB,IAAAA,EAAAT,IAEDO,EAJHT,EArCoB,GAuDZY,GAvDY,IA8ChBzB,EAAAqB,SAAA,UACAR,EAAAA,YAAoBC,WACpBW,EAAAC,GAYI1B,EAAY2B,YAAY,UATxBD,EAAAA,YAAgBb,WAWTY,GAAgBC,IAT3B1B,EAAA2B,YAAA,UACAxB,EAAAkB,SAAA,aAICf,EAAUmB,GACPtB,EAAAwB,YAAA,UAGH5B,EAAAS,QAJMoB,OAIIH,WACPzB,EAAY2B,EACZxB,EAAakB,YAAS,UApB9BlB,EAAAkB,SAAA,YAqCAlB,EAAaM,GAAG,QAAS,WATvBD,IACKF,EADUS,IAtEjB,IAwEQZ,EAAAA,iBAAawB,SAAYX,WAAzBa,GAjFR,OAqFC7B,EANDS,GAAA,QAAA,WAiBI,IATJoB,EASkBd,IAvFlB,IA+EAZ,EAAAA,iBAAA2B,SAAyBd,WAAWa,GAxFpC,OAiGI,GAAArB,OAAIqB,SAAQE,KAAAA,CACZhC,IAAEiC,EAAAjC,EAAAS,OAAiBsB,SAAWd,KAF1Be,MADR,IAAAC,EAAA9B,OAAA,OAeIH,EAAE,cAAc+B,SATnBG,UAAAD,EAAA3B,SAAA6B,KANc,KASfnC,EAAA,mBAAAU,GAAA,QAAA,SAAA0B,GAEMC,EAAAA,iBACH5B,OAAO6B,SAASC,KAAKvC,EAAAwC,MAAAC,KAAA,QAAAC,OAAA,GACpB,IAAIT,EAAUjC,EAAES,OAAO6B,SAASC,KAZ5BP,MAaDC,EAACA,QAAkBjC,EAAA,cAAA2C,MAf1B,GAe0BZ,SAASG,UAAAD,EAAA3B,SAAA6B,KAdpB,QAhGnB,CA+GgCS","file":"subnav.js","sourcesContent":["(($) => {\n    'use strict';\n    // duration of scroll animation\n    const scrollDuration = 300;\n    // paddles\n    let $leftPaddle = $('.left-paddle');\n    let $rightPaddle = $('.right-paddle');\n    // get items dimensions\n    let itemsLength = $('.sub-nav-item').length;\n    let itemSize = $('.sub-nav-item').outerWidth(true);\n    // get some relevant size for the paddle triggering point\n    const paddleMargin = 20;\n\n    const offset = 150;\n\n    // get wrapper width\n    let getMenuWrapperSize = () => $('.sub-nav-inner-wrapper').outerWidth();\n\n    let menuWrapperSize = getMenuWrapperSize();\n    // the wrapper is responsive\n    $(window).on('resize', function() {\n        menuWrapperSize = getMenuWrapperSize();\n    });\n    // size of the visible part of the menu is equal as the wrapper size\n    let menuVisibleSize = menuWrapperSize;\n\n    // get total width of all menu items\n    let getMenuSize = () => itemsLength * itemSize;\n\n    let menuSize = getMenuSize();\n    // get how much of menu is invisible\n    let menuInvisibleSize = menuSize - menuWrapperSize;\n\n    // get how much have we scrolled to the left\n    let getMenuPosition = () => $('.sub-nav-list').scrollLeft();\n\n    if(!itemsLength) { return; }\n\n    const delay = 200;\n    $('.sub-nav-item a').each(function ( inx, item ) {\n        $(item).css('transitionDelay', delay * (inx + 0.3) / 1000 + 's').addClass('item-show');\n\n    });\n\n    let maxAnimationTime = delay * (($('.sub-nav-item a').length - 1) + 0.5) / 1000;\n    let TO = setTimeout(function() {\n        $('.sub-nav-item a').css('transitionDelay', 0 + 's');\n        clearTimeout(TO);\n        TO = null;\n    }, maxAnimationTime);\n\n    // finally, what happens when we are actually scrolling the menu\n    $('.sub-nav-list').on('scroll', function() {\n\n        // get how much of menu is invisible\n        menuInvisibleSize = menuSize - menuWrapperSize;\n        // get how much have we scrolled so far\n        let menuPosition = getMenuPosition();\n\n        let menuEndOffset = menuInvisibleSize - paddleMargin;\n\n        // show & hide the paddles\n        // depending on scroll position\n        if (menuPosition <= paddleMargin) {\n            $leftPaddle.addClass('hidden');\n            $rightPaddle.removeClass('hidden');\n        } else if (menuPosition < menuEndOffset) {\n            // show both paddles in the middle\n            $leftPaddle.removeClass('hidden');\n            $rightPaddle.removeClass('hidden');\n        } else if (menuPosition >= menuEndOffset) {\n            $leftPaddle.removeClass('hidden');\n            $rightPaddle.addClass('hidden');\n        }\n    });\n\n    if(menuWrapperSize < menuSize) {\n        $rightPaddle.removeClass('hidden');\n    }\n\n    $(window).resize(function () {\n        if(menuWrapperSize < menuSize) {\n            $rightPaddle.removeClass('hidden');\n        } else {\n            $rightPaddle.addClass('hidden');\n        }\n    });\n\n    // scroll to left\n    $rightPaddle.on('click', function() {\n        let menuPos = getMenuPosition();\n        let shift = menuPos + offset;\n        $('.sub-nav-list').animate( { scrollLeft: shift }, scrollDuration);\n    });\n\n    // scroll to right\n    $leftPaddle.on('click', function() {\n        let menuPos = getMenuPosition();\n        let shift = menuPos - offset;\n        $('.sub-nav-list').animate( { scrollLeft: shift }, scrollDuration);\n    });\n\n     ////////////////////////////////////////////////////////////\n    ///    Scrolling\n    ////////////////////////////////////////////////////////////\n    const DELAY = 0,\n          DURATION = 300,\n          POSTFIX = '_s';\n    if(window.location.hash){\n        let section = $(window.location.hash + POSTFIX);\n        if(!section.length) { return; }\n        $('html, body').animate({\n            scrollTop: section.offset().top\n        }, DURATION);\n    }\n\n    $('.sub-nav-item a').on('click', function (e) {\n        e.preventDefault();\n        window.location.hash = $(this).attr('href').substr(1);\n        let section = $(window.location.hash + POSTFIX);\n        if(!section.length) { return; }\n        $('html, body').delay( DELAY ).animate({\n            scrollTop: section.offset().top\n        }, DURATION);\n    });\n})(jQuery);\n\n"]}